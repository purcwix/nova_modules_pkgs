- name: Validate each repo-root directory
        run: |
          REQUIRED=(
            "dependency.json"
            "commands"
            "plugins"
            "root.nv"
            "versions.json"
            "priorities.json"
            "extras"
            ".nvroot"
            ".nova_modules"
          )

          fail=0

          for dir in */; do
            echo "ðŸ”Ž Checking $dir ..."
            pushd "$dir" > /dev/null

            # Check required items
            for item in "${REQUIRED[@]}"; do
              if [ ! -e "$item" ]; then
                echo "âŒ $dir is missing: $item"
                fail=1
              else
                echo "âœ… $dir has: $item"
              fi
            done

            # Check for unknown files/dirs
            for entry in * .*; do
              case "$entry" in
                .|..|.git|.github) continue ;;
                ${REQUIRED[@]})
                  continue ;;
                *)
                  echo "âš ï¸ $dir contains unknown file/dir: $entry"
                  fail=1
                  ;;
              esac
            done

            popd > /dev/null
          done
